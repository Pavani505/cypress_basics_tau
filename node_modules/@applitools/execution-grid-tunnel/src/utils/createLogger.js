const {makeLogger} = require('@applitools/logger')

module.exports = function ({mode, dirname, filename = "execution-grid-tunnel", level}) {
  // Print logs in terminal when running execution-grid-tunnel in development mode (with `npm run start`)
  const logHandler =
    mode === 'development'
      ? {type: 'console'}
      : {
          type: 'rolling file',
          name: filename,
          dirname,
        }

  const logger = makeLogger({
    handler: logHandler,
    label: filename,
    level,
    colors: true,
  })

  return logger
}
