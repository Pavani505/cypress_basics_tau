"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.reportKobiton = void 0;
async function reportKobiton({ driver, settings, logger }) {
    var _a;
    // At this point, the driver might be closed already. The operation below could fail in this case
    try {
        if ((_a = (await (driver === null || driver === void 0 ? void 0 : driver.getEnvironment()))) === null || _a === void 0 ? void 0 : _a.isKobiton) {
            const kobitonInfo = {
                batchId: settings.batchId,
                batchUrl: settings.resultsUrl,
            };
            logger.log('sending to kobiton', kobitonInfo);
            await driver.execute('kobiton:assignApplitoolsInfo', kobitonInfo);
        }
    }
    catch (err) {
        logger.log('failed to send to kobiton', err);
    }
}
exports.reportKobiton = reportKobiton;
