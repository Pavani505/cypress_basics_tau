import type { MaybeArray } from '@applitools/utils';
import type * as AutomationCore from '../automation/types';
import { type SpecType, type CommonSelector } from '@applitools/driver';
import { type Logger } from '@applitools/logger';
import { type Proxy } from '@applitools/req';
import { type UFGClient, type UFGClientSettings, type Selector as UFGSelector, type Environment as UFGEnvironment, type DomSnapshot as UFGDomSnapshot, type AndroidSnapshot as UFGAndroidSnapshot, type IOSSnapshot as UFGIOSSnapshot } from '@applitools/ufg-client';
export * from '../automation/types';
export type DomSnapshot = UFGDomSnapshot & {
    generatedSelectors?: {
        originalSelector: CommonSelector | null;
        safeSelector: CommonSelector | null;
    }[];
};
export type AndroidSnapshot = UFGAndroidSnapshot;
export type IOSSnapshot = UFGIOSSnapshot;
export type SnapshotTarget = MaybeArray<DomSnapshot> | MaybeArray<AndroidSnapshot> | MaybeArray<IOSSnapshot>;
export type Target<TSpec extends SpecType> = SnapshotTarget | AutomationCore.Target<TSpec>;
export interface Core<TSpec extends SpecType> extends AutomationCore.Core<TSpec> {
    readonly type: 'ufg';
    getUFGClient(options?: {
        settings: UFGClientSettings;
        logger?: Logger;
    }): Promise<UFGClient>;
    takeSnapshots?(options: {
        target: AutomationCore.DriverTarget<TSpec>;
        settings?: SnapshotSettings<TSpec>;
        account: AutomationCore.Account;
        logger?: Logger;
    }): Promise<Snapshot[]>;
    openEyes(options: {
        target?: AutomationCore.DriverTarget<TSpec>;
        settings: AutomationCore.OpenSettings;
        storage?: AutomationCore.EyesStorage;
        logger?: Logger;
    }): Promise<Eyes<TSpec>>;
}
export interface Eyes<TSpec extends SpecType> extends AutomationCore.Eyes<TSpec> {
    readonly type: 'ufg';
    readonly core: Core<TSpec>;
    check(options?: {
        target?: Target<TSpec>;
        settings?: CheckSettings<TSpec>;
        logger?: Logger;
    }): Promise<void>;
    checkAndClose(options?: {
        target?: Target<TSpec>;
        settings?: CheckSettings<TSpec> & AutomationCore.CloseSettings;
        logger?: Logger;
    }): Promise<void>;
}
export type SnapshotSettings<TSpec extends SpecType> = AutomationCore.CheckSettings<TSpec> & {
    disableBrowserFetching?: boolean;
    layoutBreakpoints?: {
        breakpoints: number[] | boolean;
        reload?: boolean;
    };
    hooks?: {
        beforeCaptureScreenshot: string;
    };
    ufgOptions?: Record<string, any>;
    prefixRenderId?: string;
    autProxy?: Proxy & {
        mode?: 'Allow' | 'Block';
        domains?: string[];
    };
    headers?: Record<string, string>;
};
export type CheckSettings<TSpec extends SpecType> = SnapshotSettings<TSpec>;
export type SafeCheckSettings = CheckSettings<SpecType<never, never, UFGSelector, never, never>>;
export type Snapshot = {
    target: DomSnapshot | AndroidSnapshot | IOSSnapshot;
    settings: SafeCheckSettings;
    environment: UFGEnvironment;
    account: AutomationCore.Account;
    url: string;
    title: string;
    userAgent?: string;
};
